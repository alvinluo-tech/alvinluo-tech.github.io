let t=null,m=null;function B(g,r={}){if(!g||!g.trim())return;t&&(m!==null&&clearTimeout(m),t.parentNode&&t.parentNode.removeChild(t),t=null),document.querySelectorAll(".model-message-container").forEach(o=>{o.parentNode&&o.parentNode.removeChild(o)});const a=document.documentElement.classList.contains("dark")||window.matchMedia("(prefers-color-scheme: dark)").matches,e=document.createElement("div");e.className="model-message-container";const l=document.createElement("div");l.className="model-message",l.textContent=g;const s=document.createElement("div");s.className="model-message-arrow",Object.assign(e.style,{position:"fixed",zIndex:"1001",pointerEvents:"none",opacity:"0",transform:"translateY(15px) translateX(-50%) scale(0.9)",transition:"all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)"});const O={position:"relative",background:a?"linear-gradient(135deg, rgba(45, 55, 72, 0.95), rgba(26, 32, 44, 0.9))":"linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(240, 248, 255, 0.9))",color:a?"#e2e8f0":"#2c3e50",padding:"12px 16px",borderRadius:"16px",fontSize:"14px",fontWeight:"500",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',maxWidth:"240px",minWidth:"100px",wordWrap:"break-word",textAlign:"center",whiteSpace:"pre-wrap",boxShadow:a?"0 8px 32px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(0, 0, 0, 0.2)":"0 8px 32px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08)",border:a?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(255, 255, 255, 0.6)",backdropFilter:"blur(12px)",letterSpacing:"0.3px",lineHeight:"1.4"};Object.assign(l.style,O),Object.assign(s.style,{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",width:"0",height:"0",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderTop:a?"8px solid rgba(45, 55, 72, 0.95)":"8px solid rgba(255, 255, 255, 0.95)",filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1))"}),l.appendChild(s),e.appendChild(l),document.body.appendChild(e),t=e;const b=document.getElementById(r.containerId||"model-container");if(b){const o=b.getBoundingClientRect(),f=o.left+o.width/2,h=240,u=60,n=10;let d=f,c=o.top-u-25;const w=n+h/2,y=window.innerWidth-n-h/2;d<w?d=w:d>y&&(d=y);const W=n,M=window.innerHeight-u-n;c<W?(c=o.bottom+25,s.style.top="0",s.style.bottom="auto",s.style.borderTop="none",s.style.borderBottom=a?"8px solid rgba(45, 55, 72, 0.95)":"8px solid rgba(255, 255, 255, 0.95)"):c>M&&(c=M),e.style.left=d+"px",e.style.top=c+"px",setTimeout(()=>{const X=e.getBoundingClientRect(),x=X.width,C=X.height;let i=f;const N=n+x/2,T=window.innerWidth-n-x/2;i<N?i=N:i>T&&(i=T);let p=o.top-C-25;const j=n,v=window.innerHeight-C-n;let E=!0;p<j?(p=o.bottom+25,E=!1):p>v&&(p=v);const k=o.left+o.width/2-i,S=x/2-20,Y=Math.max(-S,Math.min(S,k));E?Object.assign(s.style,{position:"absolute",top:"100%",left:"50%",bottom:"auto",transform:`translateX(calc(-50% + ${Y}px))`,width:"0",height:"0",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderTop:a?"8px solid rgba(45, 55, 72, 0.95)":"8px solid rgba(255, 255, 255, 0.95)",borderBottom:"none",filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1))"}):Object.assign(s.style,{position:"absolute",top:"0",left:"50%",bottom:"auto",transform:`translateX(calc(-50% + ${Y}px))`,width:"0",height:"0",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderTop:"none",borderBottom:a?"8px solid rgba(45, 55, 72, 0.95)":"8px solid rgba(255, 255, 255, 0.95)",filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1))"}),e.style.left=i+"px",e.style.top=p+"px"},50)}setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0) translateX(-50%) scale(1)"},100);const R=r.displayTime||3e3;m=window.setTimeout(()=>{e.style.opacity="0",e.style.transform="translateY(-15px) translateX(-50%) scale(0.95)",setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e),t===e&&(t=null)},400)},R)}function H(){t&&(m!==null&&clearTimeout(m),t.parentNode&&t.parentNode.removeChild(t),t=null),document.querySelectorAll(".model-message-container").forEach(r=>{r.parentNode&&r.parentNode.removeChild(r)})}window.showModelMessage=B;window.clearModelMessage=H;export{H as clearMessage,B as showMessage};
